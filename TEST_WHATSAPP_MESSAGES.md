# ุฏููู ุงุฎุชุจุงุฑ ุตูุญุฉ WhatsApp Messages
## WhatsApp Messages Testing Guide

---

## ๐งช ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ | Testing Steps

### 1. **ุชุณุฌูู ุงูุฏุฎูู | Login**

ุงูุชุญ ุงููุชุตูุญ ูุงูุชูู ุฅูู:
```
http://localhost:3001/login
```

ุงุณุชุฎุฏู ุจูุงูุงุช ุงูุงุนุชูุงุฏ:
- **Email:** `test@test.com`
- **Password:** `test123`

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุชุณุฌูู ุฏุฎูู ูุงุฌุญ
- โ ุญูุธ JWT token ูู localStorage
- โ ุฅุนุงุฏุฉ ุชูุฌูู ุฅูู Dashboard

---

### 2. **ูุชุญ ุตูุญุฉ ุงูุฑุณุงุฆู | Open Messages Page**

ุงูุชูู ุฅูู:
```
http://localhost:3001/dashboard/whatsapp/messages
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุชุญููู ูุงุฆูุฉ ุฌูุงุช ุงูุงุชุตุงู (3 ุฌูุงุช ุงุชุตุงู)
- โ ุนุฑุถ Loading state ุฃุซูุงุก ุงูุชุญููู
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู Console

---

### 3. **ุงุฎุชูุงุฑ ุฌูุฉ ุงุชุตุงู | Select Contact**

ุงุถุบุท ุนูู ุฃู ุฌูุฉ ุงุชุตุงู ูู ุงููุงุฆูุฉ (ูุซูุงู: Test Contact 1)

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุชุญููู ุงูุฑุณุงุฆู ุงูุฎุงุตุฉ ุจุฌูุฉ ุงูุงุชุตุงู
- โ ุนุฑุถ Loading state ุฃุซูุงุก ุชุญููู ุงูุฑุณุงุฆู
- โ ุนุฑุถ ุงูุฑุณุงุฆู ุจุดูู ุตุญูุญ (inbound ุนูู ุงููุณุงุฑุ outbound ุนูู ุงููููู)
- โ ุนุฑุถ ุงูููุช ุจุดูู ุตุญูุญ
- โ ุนุฑุถ ุญุงูุฉ ุงูุฑุณุงูุฉ (โ ุฃู โโ)

---

### 4. **ุฅุฑุณุงู ุฑุณุงูุฉ | Send Message**

ุงูุชุจ ุฑุณุงูุฉ ูู ุญูู ุงูุฅุฏุฎุงู ูุงุถุบุท Enter ุฃู ุฒุฑ ุงูุฅุฑุณุงู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุจูุฌุงุญ
- โ ุธููุฑ ุงูุฑุณุงูุฉ ููุฑุงู ูู ูุงุฆูุฉ ุงูุฑุณุงุฆู
- โ ุชูุฑูุบ ุญูู ุงูุฅุฏุฎุงู
- โ Scroll ุชููุงุฆู ุฅูู ุขุฎุฑ ุฑุณุงูุฉ
- โ ุนุฑุถ ุญุงูุฉ ุงูุฑุณุงูุฉ (pending โ sent โ delivered)

---

### 5. **ุงุณุชูุจุงู ุฑุณุงูุฉ ุฌุฏูุฏุฉ ุนุจุฑ WebSocket | Receive New Message**

ุฃุฑุณู ุฑุณุงูุฉ ูู ุฑูู WhatsApp ุขุฎุฑ ุฅูู ุงูุฑูู ุงููุชุตู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุธููุฑ ุงูุฑุณุงูุฉ ููุฑุงู ูู ุงูุตูุญุฉ (ุจุฏูู refresh)
- โ Scroll ุชููุงุฆู ุฅูู ุขุฎุฑ ุฑุณุงูุฉ
- โ ุนุฑุถ ุงูุฑุณุงูุฉ ุนูู ุงููุณุงุฑ (inbound)

---

### 6. **ุงุฎุชุจุงุฑ Error Handling | Test Error Handling**

#### 6.1 ุงุฎุชุจุงุฑ ุงูุชูุงุก ุงูุฌูุณุฉ:
1. ุงุญุฐู JWT token ูู localStorage:
   ```javascript
   localStorage.removeItem('accessToken')
   ```
2. ุญุงูู ุฅุฑุณุงู ุฑุณุงูุฉ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุธููุฑ Error Banner ูู ุฃุนูู ุงูุตูุญุฉ
- โ ุฑุณุงูุฉ: "ุงูุชูุช ุตูุงุญูุฉ ุงูุฌูุณุฉ. ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู."
- โ ุฅุนุงุฏุฉ ุชูุฌูู ุชููุงุฆู ุฅูู ุตูุญุฉ Login ุจุนุฏ ุซุงููุชูู

#### 6.2 ุงุฎุชุจุงุฑ ูุดู ุงูุดุจูุฉ:
1. ุฃููู ุงูุฎุงุฏู ุงูุฎููู
2. ุญุงูู ุชุญููู ุงูุฑุณุงุฆู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุธููุฑ Error Banner
- โ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ

---

### 7. **ุงุฎุชุจุงุฑ Empty States | Test Empty States**

#### 7.1 ูุง ุชูุฌุฏ ุฌูุงุช ุงุชุตุงู:
ุฅุฐุง ูู ุชูู ููุงู ุฌูุงุช ุงุชุตุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุนุฑุถ ุฑุณุงูุฉ: "ูุง ุชูุฌุฏ ุฌูุงุช ุงุชุตุงู"
- โ ุฃููููุฉ WhatsApp ูุจูุฑุฉ
- โ ุฒุฑ "ูุญุงุฏุซุฉ ุฌุฏูุฏุฉ" ูุนูู

#### 7.2 ูุง ุชูุฌุฏ ุฑุณุงุฆู:
ุงุฎุชุฑ ุฌูุฉ ุงุชุตุงู ุจุฏูู ุฑุณุงุฆู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุนุฑุถ ุฑุณุงูุฉ: "ูุง ุชูุฌุฏ ุฑุณุงุฆู"
- โ ุฑุณุงูุฉ: "ุงุจุฏุฃ ุงููุญุงุฏุซุฉ ุจุฅุฑุณุงู ุฑุณุงูุฉ!"
- โ ุฃููููุฉ WhatsApp ูุจูุฑุฉ

---

### 8. **ุงุฎุชุจุงุฑ ุงูุจุญุซ | Test Search**

ุงูุชุจ ูู ุญูู ุงูุจุญุซ ูู ูุงุฆูุฉ ุฌูุงุช ุงูุงุชุตุงู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุชุตููุฉ ุฌูุงุช ุงูุงุชุตุงู ุญุณุจ ุงูุงุณู ุฃู ุฑูู ุงููุงุชู
- โ ุชุญุฏูุซ ุงููุงุฆูุฉ ููุฑุงู

---

### 9. **ุงุฎุชุจุงุฑ ุฅูุดุงุก ุฌูุฉ ุงุชุตุงู ุฌุฏูุฏุฉ | Test New Contact**

1. ุงุถุบุท ุนูู ุฒุฑ "ุฌุฏูุฏ" ูู ุฃุนูู ูุงุฆูุฉ ุฌูุงุช ุงูุงุชุตุงู
2. ุฃุฏุฎู ุฑูู ุงููุงุชู ูุงูุงุณู
3. ุงุถุบุท "ุฅูุดุงุก ุงููุญุงุฏุซุฉ"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฅูุดุงุก ุฌูุฉ ุงุชุตุงู ุฌุฏูุฏุฉ
- โ ุฅุถุงูุชูุง ุฅูู ุงููุงุฆูุฉ
- โ ุงุฎุชูุงุฑูุง ุชููุงุฆูุงู
- โ ุฅุบูุงู ุงููููุฐุฌ

---

## ๐ ูุญุต Console | Console Inspection

ุงูุชุญ Developer Tools (F12) ูุชุญูู ูู:

### โ ูุฌุจ ุฃู ุชุธูุฑ:
```
โ Contacts loaded: 3
โ Messages loaded: 8
โ Message sent: {...}
๐ WebSocket connected
๐ฅ Received whatsapp_message: {...}
```

### โ ูุฌุจ ุฃูุง ุชุธูุฑ:
```
โ 401 Unauthorized
โ Token ุบูุฑ ุตุงูุญ
โ Failed to fetch
โ React key warnings
โ Uncaught errors
```

---

## ๐ ุงุฎุชุจุงุฑ API ูุจุงุดุฑุฉ | Direct API Testing

### 1. ุชุณุฌูู ุงูุฏุฎูู:
```bash
curl -X POST "http://localhost:3000/api/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"email": "test@test.com", "password": "test123"}' \
  -c cookies.txt
```

### 2. ุฌูุจ ุฌูุงุช ุงูุงุชุตุงู:
```bash
curl -X GET "http://localhost:3000/api/v1/whatsapp/contacts" \
  -b cookies.txt
```

### 3. ุฌูุจ ุงูุฑุณุงุฆู:
```bash
curl -X GET "http://localhost:3000/api/v1/whatsapp/messages?contact=201065676135&limit=5" \
  -b cookies.txt
```

### 4. ุฅุฑุณุงู ุฑุณุงูุฉ:
```bash
curl -X POST "http://localhost:3000/api/v1/whatsapp/messages/send" \
  -H "Content-Type: application/json" \
  -d '{"sessionName": "456456", "to": "201065676135", "text": "Test message"}' \
  -b cookies.txt
```

---

## โ Checklist ุงูููุงุฆู | Final Checklist

### ุงููุตุงุฏูุฉ | Authentication:
- [ ] JWT token ููุญูุธ ูู localStorage
- [ ] ุฌููุน ุทูุจุงุช API ุชุณุชุฎุฏู JWT ูู Authorization header
- [ ] ูุนุงูุฌุฉ ุฎุทุฃ 401 ุชุนูู ุจุดูู ุตุญูุญ
- [ ] ุฅุนุงุฏุฉ ุชูุฌูู ุฅูู Login ุนูุฏ ุงูุชูุงุก ุงูุฌูุณุฉ

### ุนุฑุถ ุงูุจูุงูุงุช | Data Display:
- [ ] ุฌูุงุช ุงูุงุชุตุงู ุชูุนุฑุถ ุจุดูู ุตุญูุญ
- [ ] ุงูุฑุณุงุฆู ุชูุนุฑุถ ุจุดูู ุตุญูุญ
- [ ] ุงูููุช ููุณู ุจุดูู ุตุญูุญ (ุงููููุ ุฃูุณุ ุชุงุฑูุฎ)
- [ ] ุญุงูุฉ ุงูุฑุณุงูุฉ ุชูุนุฑุถ ุจุดูู ุตุญูุญ (โ โโ)
- [ ] ุงูุฑุณุงุฆู ุงูุตุงุฏุฑุฉ ุนูู ุงููููู (ุฃุฎุถุฑ)
- [ ] ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ ุนูู ุงููุณุงุฑ (ุฃุจูุถ)

### ุงููุธุงุฆู | Functionality:
- [ ] ุฅุฑุณุงู ุฑุณุงูุฉ ูุนูู
- [ ] ุงุณุชูุจุงู ุฑุณุงุฆู ุฌุฏูุฏุฉ ุนุจุฑ WebSocket ูุนูู
- [ ] ุงูุจุญุซ ูู ุฌูุงุช ุงูุงุชุตุงู ูุนูู
- [ ] ุฅูุดุงุก ุฌูุฉ ุงุชุตุงู ุฌุฏูุฏุฉ ูุนูู
- [ ] Scroll ุชููุงุฆู ุฅูู ุขุฎุฑ ุฑุณุงูุฉ ูุนูู

### UX/UI:
- [ ] Loading states ุชุธูุฑ ุจุดูู ุตุญูุญ
- [ ] Error Banner ูุธูุฑ ุนูุฏ ุงูุฃุฎุทุงุก
- [ ] Empty states ุฌูููุฉ ููุงุถุญุฉ
- [ ] ุงูุตูุญุฉ responsive
- [ ] ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู Console

### WebSocket:
- [ ] WebSocket ูุชุตู ุจูุฌุงุญ
- [ ] ุงูุฑุณุงุฆู ุงูุฌุฏูุฏุฉ ุชุธูุฑ ููุฑุงู
- [ ] ูุง ููุฌุฏ ุชูุฑุงุฑ ููุฑุณุงุฆู
- [ ] WebSocket ููุนูุฏ ุงูุงุชุตุงู ุนูุฏ ุงูุงููุทุงุน

---

## ๐ ุงููุดุงูู ุงูุดุงุฆุนุฉ ูุญููููุง | Common Issues & Solutions

### 1. ุงูุฑุณุงุฆู ูุง ุชุธูุฑ:
**ุงูุณุจุจ:** ูุดููุฉ ูู ุงููุตุงุฏูุฉ
**ุงูุญู:**
```javascript
// ุชุญูู ูู ูุฌูุฏ token
console.log(localStorage.getItem('accessToken'))

// ุฅุฐุง ูู ููู ููุฌูุฏุ ุณุฌู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู
```

### 2. WebSocket ูุง ูุนูู:
**ุงูุณุจุจ:** ุงูุฎุงุฏู ุงูุฎููู ุบูุฑ ูุชุตู
**ุงูุญู:**
```bash
# ุชุญูู ูู ุฃู ุงูุฎุงุฏู ูุนูู
netstat -ano | findstr :3000

# ุฅุฐุง ูู ููู ูุนููุ ุดุบูู
cd backend
npm start
```

### 3. ุฃุฎุทุงุก CORS:
**ุงูุณุจุจ:** Origin ุบูุฑ ูุณููุญ
**ุงูุญู:** ุชุญูู ูู ุฃู Frontend ูุนูู ุนูู `http://localhost:3001`

### 4. ุงูุฑุณุงุฆู ุชุฎุชูู ุจุนุฏ Refresh:
**ุงูุณุจุจ:** ูุฐู ุงููุดููุฉ ุชู ุฅุตูุงุญูุง! ุงูุฑุณุงุฆู ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
**ุงูุชุญูู:**
```bash
# ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
curl -X GET "http://localhost:3000/api/v1/whatsapp/messages?limit=5" -b cookies.txt
```

---

## ๐ ููุงุญุธุงุช | Notes

1. **sessionName:** ุญุงููุงู ูุชู ุชุญูููู ูู localStorage. ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ: `456456`
2. **JWT Token:** ุตุงูุญ ููุฏุฉ 24 ุณุงุนุฉ
3. **WebSocket:** ููุนูุฏ ุงูุงุชุตุงู ุชููุงุฆูุงู ุนูุฏ ุงูุงููุทุงุน
4. **Database:** ุฌููุน ุงูุฑุณุงุฆู ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุง ุชุฎุชูู

---

**ุชู ุฅุนุฏุงุฏู ุจูุงุณุทุฉ | Prepared by:** Augment Agent  
**ุงูุชุงุฑูุฎ | Date:** 2025-10-03

